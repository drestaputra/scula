(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["reports-team"],{"25c3":function(t,s,e){"use strict";e.r(s);var a,i,r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-wrapper"},[t.isRouteChecked?e("div",{staticClass:"page page-members"},[e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"page-content"},[e("div",{staticClass:"page-options"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-inline"},[e("multiselect",{staticClass:"multiselect-auto-width form-control",attrs:{placeholder:"Select Product",options:t.productsList,"show-labels":!1,"preselect-first":!0,"allow-empty":!1,"track-by":"_id",label:"name"},model:{value:t.product,callback:function(s){t.product=s},expression:"product"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("No product found")])])],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"text-right"},[e("daterangepicker",{attrs:{presets:t.filterDatePresets},on:{selected:t.setFilterDate}})],1)])])]),e("div",{staticClass:"page-overview"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card card-gradient bg-white mb-3"},[t._m(1),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"team-stats"},[t._l(t.stats[0].values,function(s,a){return e("div",{key:a,staticClass:"team-stat"},[e("div",{staticClass:"team-stat-chart"},[e("pie-chart",{attrs:{width:30,height:30,data:t.chartData(s.paid_ratio)}}),e("div",[e("b",[t._v(t._s(s.paid_ratio))]),t._v("%")])],1),e("div",{staticClass:"team-stat-right"},[e("div",{staticClass:"team-stat-name"},[t._v(t._s(s.name))])])])}),0===t.stats[0].values.length?e("div",{staticClass:"team-stat align-items-center"},[e("div",{staticClass:"w-100 text-center"},[t._v("No Data Available")])]):t._e()],2)])])]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card card-gradient bg-white mb-3"},[t._m(2),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"team-stats"},[t._l(t.stats[1].values,function(s,a){return e("div",{key:a,staticClass:"team-stat"},[e("div",{staticClass:"team-stat-count"},[t._v(t._s(s.transaction_count))]),e("div",{staticClass:"team-stat-right"},[e("div",{staticClass:"team-stat-name"},[t._v(t._s(s.name))]),e("div",{staticClass:"team-stat-meta"},[t._v(t._s(s.submission_count)+" Orders")])])])}),0===t.stats[1].values.length?e("div",{staticClass:"team-stat align-items-center"},[e("div",{staticClass:"w-100 text-center"},[t._v("No Data Available")])]):t._e()],2)])])]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card card-gradient bg-white mb-3"},[t._m(3),e("div",{staticClass:"card-body p-0"},[e("div",{staticClass:"team-stats"},[t._l(t.stats[2].values,function(s,a){return e("div",{key:a,staticClass:"team-stat"},[e("div",{staticClass:"team-stat-index"},[t._v(t._s(a+1))]),e("div",{staticClass:"team-stat-right"},[e("div",{staticClass:"team-stat-name"},[t._v(t._s(s.name))]),e("div",{staticClass:"team-stat-meta"},[t._v(t._s(t.formatMoney(s.net_revenue)))])])])}),0===t.stats[2].values.length?e("div",{staticClass:"team-stat align-items-center"},[e("div",{staticClass:"w-100 text-center"},[t._v("No Data Available")])]):t._e()],2)])])])])]),e("div",{staticClass:"table-wrapper"},[e("div",{staticClass:"table-list-menu hidden"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"}),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"table-filters form-inline is-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"input form-control form-control-sm",attrs:{type:"text",placeholder:"Search.."},domProps:{value:t.keyword},on:{input:[function(s){s.target.composing||(t.keyword=s.target.value)},t.onKeywordChange]}})])])])]),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-primary table-striped table--small"},[e("thead",[e("tr",[e("th",{staticClass:"align-middle pt-0 pb-0"}),e("th",{staticClass:"th-sort text-left",class:t.sortClass("name"),attrs:{width:"25%"},on:{click:function(s){return t.changeSorting("name")}}},[t._v("Name")]),e("th",{staticClass:"th-sort",class:t.sortClass("submission_count"),on:{click:function(s){return t.changeSorting("submission_count")}}},[t._v("Order")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("transaction_count"),on:{click:function(s){return t.changeSorting("transaction_count")}}},[t._v("Paid")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("paid_ratio"),on:{click:function(s){return t.changeSorting("paid_ratio")}}},[t._v("Paid Ratio")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("quantity"),on:{click:function(s){return t.changeSorting("quantity")}}},[t._v("Quantity")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("unpaid_count"),on:{click:function(s){return t.changeSorting("unpaid_count")}}},[t._v("Unpaid Orders")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("gross_revenue"),on:{click:function(s){return t.changeSorting("gross_revenue")}}},[t._v("Gross Revenue")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("net_revenue"),on:{click:function(s){return t.changeSorting("net_revenue")}}},[t._v("Net Revenue")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("gross_profit"),on:{click:function(s){return t.changeSorting("gross_profit")}}},[t._v("Gross Profit")])])]),e("tbody",t._l(t.all,function(s){return e("tr",{key:s._id},[e("td",{staticClass:"align-middle text-center pt-0 pb-0"},[e("div",{staticClass:"member-picture"},[s.picture?e("img",{attrs:{src:s.picture,alt:s.name}}):t._e(),s.picture?t._e():e("i",{staticClass:"material-icons"},[t._v("account_box")])])]),e("td",[e("div",{staticClass:"member-name text-left"},[t._v(t._s(s.name))])]),e("td",{staticClass:"text-center"},[e("div",{staticClass:"member-order"},[t._v(t._s(s.submission_count))])]),e("td",{staticClass:"text-right hidden-sm"},[e("div",{staticClass:"member-transaction_count"},[t._v(t._s(s.transaction_count))])]),e("td",{staticClass:"text-center hidden-sm"},[e("div",{staticClass:"member-paid-ratio"},[t._v(t._s(s.paid_ratio)+"%")])]),e("td",{staticClass:"text-center hidden-sm"},[e("div",{staticClass:"member-quantity"},[t._v(t._s(s.quantity))])]),e("td",{staticClass:"text-center hidden-sm"},[e("div",{staticClass:"member-quantity"},[t._v(t._s(s.unpaid_count))])]),e("td",{staticClass:"text-right hidden-sm"},[e("div",{staticClass:"member-gross-revenue"},[t._v(t._s(t.formatMoney(s.gross_revenue)))])]),e("td",{staticClass:"text-right hidden-sm"},[e("div",{staticClass:"member-net-revenue"},[t._v(t._s(t.formatMoney(s.net_revenue)))])]),e("td",{staticClass:"text-right hidden-sm"},[e("div",{staticClass:"member-net-revenue"},[t._v(t._s(t.formatMoney(s.gross_profit)))])])])}),0)])]),t.isFetching?e("div",{staticClass:"table-fetch-status d-flex justify-content-between align-items-center"},[e("div",{staticClass:"is-loading large dark m-auto"})]):t._e(),0===t.all.length&&!1===t.isFetching?e("div",{staticClass:"list-empty"},[e("i",{staticClass:"material-icons md-48"},[t._v("error_outline")]),""===t.keyword?e("span",[t._v("No Data Available.")]):e("span",[t._v("No Data Available")])]):t._e()])])])]):t._e()])},n=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page-header"},[e("h1",{staticClass:"page-title"},[t._v("Team Performance")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"card-header gradient-bgr"},[e("b",[e("i",{staticClass:"material-icons mr-2 va-m"},[t._v("stars")]),e("span",{staticClass:"va-m"},[t._v("Top Paid Ratio")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"card-header gradient-bgr"},[e("b",[e("i",{staticClass:"material-icons mr-2 va-m"},[t._v("stars")]),e("span",{staticClass:"va-m"},[t._v("Top Sales")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"card-header gradient-bgr"},[e("b",[e("i",{staticClass:"material-icons mr-2 va-m"},[t._v("stars")]),e("span",{staticClass:"va-m"},[t._v("Top Revenue")])])])}],c=(e("8e6e"),e("456d"),e("7514"),e("6762"),e("2fdb"),e("55dd"),e("ac6a"),e("bd86")),o=e("2f62"),l=e("2411"),d=e("1fca"),u={name:"PieChart",extends:d["c"],props:["data"],data:function(){return{options:{responsive:!0,maintainAspectRatio:!0,cutoutPercentage:0,title:{display:!1},legend:{display:!1},tooltips:{enabled:!1}}}},mounted:function(){this.renderChart(this.data,this.options)}},h=u,v=e("2877"),m=Object(v["a"])(h,a,i,!1,null,null,null),p=m.exports,f=e("6b5f"),_=e("9af2"),C=e("4c79"),g=e("0c9f");function b(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,a)}return e}function y(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?b(e,!0).forEach(function(s){Object(c["a"])(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):b(e).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}var w=Object(f["L"])(),k={_id:0,name:"All Products"},D={name:"ReportsTeam",components:{Daterangepicker:l["a"],PieChart:p},data:function(){return{all:[],page:1,limit:25,sort_by:"net_revenue",sort:"desc",keyword:"",filterDate:w,selected:[],product:null,products:[],isFetching:!1,isAll:!1,isShowFilter:!1,dateFormat:"YYYY-MM-DD",stats:_["Kb"],isRouteChecked:!1}},methods:y({},Object(o["b"])({}),{fetchAll:function(){this.fetchProducts(),this.fetchData()},fetchProducts:function(){var t=this;this.isFetchingProducts=!0;var s=function(s){var e=s.data;t.products=e,t.isFetchingProducts=!1},e=function(){t.isFetchingProducts=!1};C["a"].getProductsList(s,e)},fetchData:function(){var t=this;this.fetch(),this.stats.forEach(function(s,e){return t.fetchStats(s.key,e)})},fetch:function(){var t=this,s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s&&this.reset(),this.isFetching=!0;var e=this.moment(this.filterDate.start).format(this.dateFormat),a=this.moment(this.filterDate.end).format(this.dateFormat),i=JSON.stringify(["cs"]),r={limit:this.limit,sort_by:this.sort_by,sort:this.sort,page:this.page,keyword:this.keyword,since:e,until:a,roles:i};this.productId&&(r.product_id=this.productId);var n=function(s){var e=s.data;e.length>0?t.all=t.all.concat(e):t.isAll=!0,t.page++,t.isFetching=!1},c=function(s){t.isFetching=!1,s.response&&400===s.response.status&&(t.isAll=!0)};g["a"].getTeamStats(r,n,c)},fetchStats:function(t,s){var e=this;this.stats[s].isFetching=!0;var a=this.moment(this.filterDate.start).format(this.dateFormat),i=this.moment(this.filterDate.end).format(this.dateFormat),r=JSON.stringify(["cs"]),n={limit:3,sort_by:t,sort:"desc",page:1,keyword:"",since:a,until:i,roles:r};this.productId&&(n.product_id=this.productId);var c=function(t){var a=t.data;e.stats[s].values=a,e.stats[s].isFetching=!1},o=function(){e.stats[s].isFetching=!1};g["a"].getTeamStats(n,c,o)},handleScroll:function(){var t=document.documentElement.offsetHeight,s=window.innerHeight,e=window.scrollY,a=50,i=t-a<=s+e;i&&(this.isFetching||this.isAll||this.fetch(!1))},changeSorting:function(t){var s=this.sort_by===t;this.sort_by=t;var e=s&&"asc"===this.sort?"desc":"asc";this.sort=e,this.fetch(!0)},sortClass:function(t){var s=this.sort_by===t,e=s?"th-sort-".concat(this.sort):"";return e},applyFilter:function(){var t=this.selectedRole.join(",").toLowerCase(),s=Object(f["m"])(this.$route.query);""!==t?s.status=t:delete s.status;var e={path:document.location.pathname,query:s};this.$router.push(e),this.isShowFilter=!1},clear:function(){this.all=[]},reset:function(){this.all=[],this.page=1,this.isAll=!1},delete:function(t){this.all.splice(t,1)},onKeywordChange:function(){var t=this;this.ooDelay(function(){t.fetch(!0)},1e3)},setFilterDate:function(t){this.filterDate=t,this.fetchData()},chartData:function(t){var s={labels:["Unpaid","Paid"],datasets:[{backgroundColor:["#0098DA","#fbaf5d"],data:[100-t,t]}]};return s},checkCapabilities:function(){this.isUserCan("report_team")?this.isRouteChecked=!0:this.$router.push("/")}}),computed:y({},Object(o["c"])({user:"user",isUserCan:"isUserCan",filterDatePresets:"filterDatePresets"}),{selectAll:{get:function(){return!!this.all&&this.selected.length===this.all.length},set:function(t){var s=[];t&&this.all.forEach(function(t){s.push(t._id)}),this.selected=s}},productId:function(){return this.$route.query.product_id},selectedItems:function(){var t=this;return this.all.filter(function(s){return t.selected.includes(s._id)})},productsList:function(){var t=Object(f["m"])(k),s=[t];return s=s.concat(this.products),s}}),watch:{user:function(){this.user&&this.checkCapabilities()},product:function(t){var s=t._id;if(0===s)this.$router.push({name:"reportsTeam"});else{var e={product_id:s};this.$router.push({query:e})}},productId:function(t){this.fetchData(),t||(this.product=k)},products:function(t){var s=this;if(this.productId){var e=t.find(function(t){return t._id===s.productId});e||(e=k),this.product=e}}},created:function(){this.user&&this.checkCapabilities(),this.fetchAll(),window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},P=D,O=Object(v["a"])(P,r,n,!1,null,null,null);s["default"]=O.exports}}]);
//# sourceMappingURL=reports-team.5180cc93.js.map