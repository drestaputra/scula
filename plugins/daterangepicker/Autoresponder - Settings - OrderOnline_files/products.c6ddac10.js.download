(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["products"],{d96f:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"overview box box--primary"},[e("div",{staticClass:"overview__number",class:t.numberClass},[t._v("\n\t\t"+t._s(t.numberDisplay)+"\n\t")]),e("div",{staticClass:"overview__label"},[e("div",{staticClass:"overview__label__name"},[t.icon&&"image"===t.iconType?e("span",{staticClass:"overview__icon icon",class:t.iconClass}):t._e(),t.icon&&"feather"===t.iconType?e("svg",{staticClass:"feather mr-2"},[e("use",{attrs:{"xlink:href":"/icons/feather-sprite.svg#"+t.icon}})]):t._e(),e("span",{staticClass:"overview__text"},[t._v(t._s(t.text))]),t.info?e("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.info,expression:"info"}],staticClass:"overview__info material-icons info"},[t._v("info")]):t._e()]),""!==t.additionalInformation?e("div",{staticClass:"overview__text_sub"},[t._v(t._s(t.additionalInformation))]):t._e()])])},o=[],a={name:"Overview",props:{type:{},number:{},icon:{},iconType:{type:String,default:"image"},text:{},stats:{},info:{}},computed:{iconClass:function(){return"icon-".concat(this.icon)},numberClass:function(){return"overview__number--".concat(this.type)},numberDisplay:function(){var t=this.number?this.number:0,s=t;return s="price"===this.type?this.formatMoney(t):"percentage"===this.type?"".concat(this.formatNumberPlain(t),"%"):"average_order"===this.type?"".concat(t,"x"):this.formatNumberPlain(t),s},additionalInformation:function(){var t="";if(this.stats)if("Users"===this.text)t=this.stats.premium_users/this.stats.users*100,t="".concat(Math.round(t),"% Premium Users (").concat(this.stats.premium_users,")");else if("Products"===this.text)t="-";else if("Orders"===this.text)t=this.stats.transaction/this.stats.submissions*100,t="".concat(Math.round(t),"% Orders Completed (").concat(this.formatNumberPlain(this.stats.transaction),")");else if("Net Revenue"===this.text){var s=Math.round(this.stats.net_revenue/this.stats.transaction);t="Avg. product price Rp".concat(this.formatNumberPlain(s))}else if("Gross Revenue"===this.text){var e=Math.round(this.stats.gross_revenue/this.stats.premium_users);t="Avg. revenue per user Rp".concat(this.formatNumberPlain(e))}else if("Bump Revenue"===this.text)t="-";else if("Shipping Cost"===this.text){var i=Math.round(this.stats.shipping_cost/this.stats.transaction);t="Avg. shipping cost Rp".concat(this.formatNumberPlain(i))}else"Coupons Claimed"===this.text&&(t="-");return t}}},r=a,n=e("2877"),c=Object(n["a"])(r,i,o,!1,null,null,null);s["a"]=c.exports},e6dc:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container"},[e("div",{staticClass:"page page-products"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"page-header-right text-right"},[e("daterangepicker",{attrs:{presets:t.filterDatePresets,start:t.since,end:t.until},on:{selected:t.setFilterDate}})],1)])])]),e("div",{staticClass:"submissions-summaries"},[e("div",{staticClass:"overviews"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("overview",{attrs:{number:t.totalProducts,type:"normal",icon:"shopping-cart","icon-type":"feather",text:"Total Products"}})],1),e("div",{staticClass:"col-md-4"},[e("overview",{attrs:{number:t.totalQtySold,type:"normal",icon:"shopping-cart","icon-type":"feather",text:"Total Quantity Sold"}})],1),e("div",{staticClass:"col-md-4"},[e("overview",{attrs:{number:t.totalPaidOrder,type:"normal",icon:"rupiah",text:"Total Paid Order"}})],1)])])]),e("div",{staticClass:"table-list-menu d-lg-flex align-items-center"},[e("div",{staticClass:"table-actions d-flex align-items-center flex-wrap"},[t.isCanDeleteProduct?e("button",{staticClass:"btn btn-light btn-icon btn-sm btn-icon-danger mr-2",class:{"is-loading":t.isDeleting},attrs:{disabled:0===t.selectedProducts.length},on:{click:function(s){t.isShowDeleteProductBulk=!0}}},[e("i",{staticClass:"material-icons"},[t._v("delete")]),e("span",[t._v("Delete")])]):t._e(),e("div",{staticClass:"dropdown mr-2"},[t.isUserCan("product_edit")?e("button",{staticClass:"btn btn-sm btn-light dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","data-display":"static","aria-haspopup":"true","aria-expanded":"false",disabled:0===t.selectedProducts.length}},[t._v("Actions")]):t._e(),e("div",{staticClass:"dropdown-menu dropdown-menu-left table-action-dropdown"},[e("button",{staticClass:"dropdown-item",on:{click:function(s){t.isShowFollowUp=!0}}},[e("i",{staticClass:"material-icons"},[t._v("title")]),e("span",[t._v("Follow-Up Text")])]),e("button",{staticClass:"dropdown-item",on:{click:function(s){t.isShowAssignation=!0}}},[e("i",{staticClass:"material-icons"},[t._v("people")]),e("span",[t._v("Assignation")])]),e("button",{staticClass:"dropdown-item",on:{click:function(s){t.isShowTracking=!0}}},[e("i",{staticClass:"material-icons"},[t._v("code")]),e("span",[t._v("Trackings")])]),t.isStorefrontActive?e("button",{staticClass:"dropdown-item",on:{click:function(s){t.isShowEditVisibility=!0}}},[e("i",{staticClass:"material-icons"},[t._v("visibility")]),e("span",[t._v("Storefront Visibility")])]):t._e()])]),e("div",{staticClass:"dropdown mr-2"},[e("button",{staticClass:"btn btn-light btn-sm dropdown-toggle flex-center",class:{"is-loading":t.isExporting},attrs:{"data-toggle":"dropdown"}},[e("i",{staticClass:"material-icons"},[t._v("save_alt")]),e("span",{staticClass:"mr-2"},[t._v("Export")])]),e("div",{staticClass:"dropdown-menu"},[e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(s){return t.exportProducts("facebook_catalog")}}},[t._v("Facebook Catalog")])])]),t.isAdmin?e("button",{staticClass:"btn btn-light btn-icon btn-sm mr-1",class:{"is-loading":t.isImporting},on:{click:function(s){t.isImportVisible=!0}}},[e("i",{staticClass:"material-icons mr-1"},[t._v("upload")]),e("span",[t._v("Import")])]):t._e(),t.selectedProducts&&t.selectedProducts.length>0?e("div",{staticClass:"btn btn-plain btn-sm d-flex align-items-center disabled"},[t._v("\n\t\t\t\t\t"+t._s(t.selectedProducts.length)+" Selected Product"),t.selectedProducts.length>1?e("span",[t._v("s")]):t._e()]):t._e()]),e("div",{staticClass:"table-filters text-right d-flex align-items-center ml-a"},[t.isFilterOn?e("button",{staticClass:"btn btn-plain btn-sm",attrs:{type:"button"},on:{click:t.clearFilter}},[t._v("Clear Filter")]):t._e(),e("button",{staticClass:"filter-toggle btn btn-light btn-sm btn-icon",attrs:{type:"button"},on:{click:function(s){t.isShowFilter=!0}}},[e("i",{staticClass:"material-icons"},[t._v("filter_list")]),e("span",[t._v("Filter")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"input form-control form-control-sm products-search-box",attrs:{type:"text",placeholder:"Search.."},domProps:{value:t.keyword},on:{input:[function(s){s.target.composing||(t.keyword=s.target.value)},t.onKeywordChange]}})])]),t.isRouteChecked?e("div",{staticClass:"products-list table-responsive"},[e("table",{staticClass:"products-list-table table table-primary table-striped mb-0"},[e("thead",[e("tr",[e("th",{staticClass:"th-checkbox",attrs:{width:"5%"}},[e("label",{staticClass:"input-checkbox-container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],staticClass:"input-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{change:function(s){var e=t.selectAll,i=s.target,o=!!i.checked;if(Array.isArray(e)){var a=null,r=t._i(e,a);i.checked?r<0&&(t.selectAll=e.concat([a])):r>-1&&(t.selectAll=e.slice(0,r).concat(e.slice(r+1)))}else t.selectAll=o}}}),e("span")])]),e("th",{staticClass:"th-product-image",attrs:{width:"7%"}}),e("th",{staticClass:"th-sort text-left",class:t.sortClass("name"),on:{click:function(s){return t.changeSorting("name")}}},[t._v("Name")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("price"),attrs:{width:"10%"},on:{click:function(s){return t.changeSorting("price")}}},[t._v("Price")]),e("th",{staticClass:"hidden-sm"},[t._v(t._s(t.$t("menu.inventory")))]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("submission_count"),attrs:{width:"8%"},on:{click:function(s){return t.changeSorting("submission_count")}}},[t._v("Order")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("transaction_count"),attrs:{width:"8%"},on:{click:function(s){return t.changeSorting("transaction_count")}}},[t._v("Paid")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("paid_ratio"),attrs:{width:"8%"},on:{click:function(s){return t.changeSorting("paid_ratio")}}},[t._v("Paid Ratio")]),e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("quantity"),attrs:{width:"8%"},on:{click:function(s){return t.changeSorting("quantity")}}},[t._v("Qty Sold")]),t.isUserCan("statistic_net_revenue")?e("th",{staticClass:"th-sort hidden-sm",class:t.sortClass("net_revenue"),attrs:{width:"10%"},on:{click:function(s){return t.changeSorting("net_revenue")}}},[t._v("Net Revenue")]):t._e()])]),e("tbody",t._l(t.products,function(s){return e("tr",{key:s._id.$oid},[e("td",{staticClass:"align-middle"},[e("label",{staticClass:"input-checkbox-container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedProducts,expression:"selectedProducts"}],staticClass:"input-checkbox",attrs:{type:"checkbox"},domProps:{value:s._id.$oid,checked:Array.isArray(t.selectedProducts)?t._i(t.selectedProducts,s._id.$oid)>-1:t.selectedProducts},on:{change:function(e){var i=t.selectedProducts,o=e.target,a=!!o.checked;if(Array.isArray(i)){var r=s._id.$oid,n=t._i(i,r);o.checked?n<0&&(t.selectedProducts=i.concat([r])):n>-1&&(t.selectedProducts=i.slice(0,n).concat(i.slice(n+1)))}else t.selectedProducts=a}}}),e("span")])]),e("td",{staticClass:"align-middle p-0"},[e("router-link",{attrs:{to:{name:"productDetails",params:{id:s._id.$oid?s._id.$oid:s._id}}}},[e("div",{staticClass:"product-image",style:{backgroundImage:"url("+(s.pictures&&""!==s.pictures?s.pictures:"https://cdn.orderonline.id/img/default-product.png")+")"}})])],1),e("td",[e("div",{staticClass:"product-name"},[e("router-link",{staticClass:"product-name-text",attrs:{to:{name:"productDetails",params:{id:s._id.$oid?s._id.$oid:s._id}}}},[e("span",{staticClass:"va-m"},[t._v(t._s(s.name))]),t.isStorefrontActive&&s.is_public?e("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Visible on Storefront",expression:"'Visible on Storefront'"}],staticClass:"material-icons va-m md-1 ml-1 text-grey"},[t._v("visibility")]):t._e()]),e("div",{staticClass:"visible-sm w-100"},[e("div",{staticClass:"group"},[e("span",[t._v("Price: "+t._s(t.formatMoney(s.price)))])]),e("div",{staticClass:"group"},[e("div",[t._v("Net Revenue")]),e("div",{staticClass:"product-revenue text-left"},[t._v(t._s(t.formatMoney(s.net_revenue)))])])]),e("div",{staticClass:"row-actions hidden-sm"},[e("a",{staticClass:"pc-done-link",attrs:{href:t.checkoutUrlFull(s.slug),target:"_blank"}},[e("i",{staticClass:"material-icons md-xs"},[t._v("launch")]),e("span",[t._v("Checkout")])]),e("router-link",{attrs:{to:{name:"productDetails",params:{id:s._id.$oid?s._id.$oid:s._id}}}},[e("i",{staticClass:"material-icons md-xs"},[t._v("trending_up")]),e("span",[t._v("Stats")])]),t.isUserCan("product_add")?e("a",{on:{click:function(e){return t.showConfirmDuplicateProduct(s)}}},[e("i",{staticClass:"material-icons md-xs"},[t._v("content_copy")]),e("span",[t._v("Duplicate")])]):t._e(),t.isUserCan("product_delete")?e("a",{on:{click:function(e){return t.showConfirmDeleteProduct(s)}}},[e("i",{staticClass:"material-icons md-xs"},[t._v("delete")]),e("span",[t._v("Delete")])]):t._e()],1)],1)]),e("td",{staticClass:"hidden-sm"},[e("div",{staticClass:"product-price text-right"},[t._v(t._s(t.formatMoney(s.price)))])]),e("td",{staticClass:"hidden-sm"},[e("div",{staticClass:"product-inventory text-right"},[s.stock.enabled?[e("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Show stock",expression:"'Show stock'"}],staticClass:"btn btn-text",attrs:{type:"button"},on:{click:function(e){return t.showStock(s)}}},[t.getStockQuantity(s)>0?e("b",{staticClass:"text-success"},[e("span",[t._v(t._s(t.getStockQuantity(s))+" in stock")])]):t._e(),t.getStockQuantity(s)<=0?e("b",{staticClass:"text-danger"},[t._v("Out of stock")]):t._e()]),e("div",{staticClass:"row-actions"},[e("router-link",{staticClass:"btn btn-text",attrs:{to:"/inventory?product_id="+s._id.$oid}},[e("i",{staticClass:"material-icons"},[t._v("history")]),e("span",[t._v("View History")])])],1)]:e("div",[t._v("-")])],2)]),e("td",{staticClass:"hidden-sm"},[e("div",{staticClass:"product-submission"},[e("div",{staticClass:"product-submission-value"},[t._v(t._s(t.formatNumberPlain(s.submission_count)))]),e("div",{staticClass:"row-actions"},[e("router-link",{attrs:{to:{name:"submissions",query:{product_id:s._id.$oid}}}},[e("i",{staticClass:"material-icons md-xs"},[t._v("remove_red_eye")]),t._v(" Orders")])],1)])]),e("td",{staticClass:"hidden-sm"},[e("div",{staticClass:"product-transaction text-center"},[e("div",{staticClass:"product-transaction-value"},[t._v(t._s(t.formatNumberPlain(s.transaction_count)))])])]),e("td",{staticClass:"hidden-sm"},[e("div",{staticClass:"product-transaction text-center"},[e("div",{staticClass:"product-transaction-value"},[s.paid_ratio?e("span",[t._v(t._s(s.paid_ratio)+"%")]):e("span",[t._v("0%")])])])]),e("td",{staticClass:"hidden-sm"},[e("div",{staticClass:"product-transaction text-center"},[e("div",{staticClass:"product-transaction-value"},[s.quantity?e("span",[t._v(t._s(s.quantity))]):e("span",[t._v("0")])])])]),t.isUserCan("statistic_net_revenue")?e("td",{staticClass:"hidden-sm text-right"},[e("div",{staticClass:"product-revenue"},[t._v(t._s(t.formatMoney(s.net_revenue)))])]):t._e()])}),0)]),0===t.products.length&&!1===t.isFetching?e("div",{staticClass:"list-empty table-empty"},[e("i",{staticClass:"material-icons mr-2 va-m"},[t._v("error_outline")]),""===t.keyword?e("span",{staticClass:"va-m"},[t._v("You haven't created any products yet.")]):e("span",{staticClass:"va-m"},[t._v("No products was found")])]):t._e()]):t._e(),t.isFetching?e("div",{staticClass:"table-fetch-status"},[e("div",{staticClass:"is-loading large dark m-auto"})]):t._e()]),e("div",{staticClass:"modals"},[t.isShowDeleteProductBulk?e("modal",{staticClass:"coupon-editor-modal",attrs:{size:"medium"},on:{close:function(s){t.isShowDeleteProductBulk=!1}}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("delete")]),t._v("Delete Product")])]),e("div",{attrs:{slot:"body"},slot:"body"},[e("p",[t._v("Are you sure want to delete "+t._s(t.selectedProducts.length)+" products?"),e("br"),t._v("All "),e("b",[t._v("orders")]),t._v(" from these products will be deleted too.")]),e("p",{staticClass:"mb-2"},[e("b",[t._v("Products to be deleted:")])]),e("div",t._l(t.selectedProductsData,function(s,i){return e("div",{key:i},[e("small",[t._v(t._s(i+1)+". "+t._s(s.name))])])}),0)]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(s){t.isShowDeleteProductBulk=!1}}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-danger",class:{"is-loading":t.isDeleting},attrs:{type:"button"},on:{click:t.bulkDelete}},[e("i",{staticClass:"material-icons"},[t._v("delete")]),e("span",[t._v("Confirm Delete")])])])]):t._e(),t.isShowDeleteProduct?e("modal",{staticClass:"coupon-editor-modal",attrs:{size:"medium"},on:{close:function(s){t.isShowDeleteProduct=!1}}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("delete")]),t._v("Delete Product")])]),e("div",{attrs:{slot:"body"},slot:"body"},[t._v("Are you sure want to delete "),e("b",[t._v(t._s(t.selectedProduct.name))]),t._v("?"),e("br"),t._v("All orders from this products will be deleted too.")]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(s){t.isShowDeleteProduct=!1}}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-danger",class:{"is-loading":t.isDeleting},attrs:{type:"button"},on:{click:t.deleteProduct}},[e("i",{staticClass:"material-icons"},[t._v("delete")]),e("span",[t._v("Delete")])])])]):t._e(),t.isShowDuplicateProduct?e("modal",{staticClass:"coupon-editor-modal",attrs:{size:"medium"},on:{close:function(s){t.isShowDuplicateProduct=!1}}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("content_copy")]),t._v("Duplicate Product")])]),e("div",{attrs:{slot:"body"},slot:"body"},[t._v("Are you sure want to duplicate "),e("b",[t._v(t._s(t.selectedProduct.name))]),t._v("?")]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(s){t.isShowDuplicateProduct=!1}}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-primary",class:{"is-loading":t.isDuplicatingProduct},attrs:{type:"button"},on:{click:function(s){return t.duplicateProduct(t.selectedProduct._id.$oid)}}},[t._v("Duplicate")])])]):t._e(),t.isShowStock?e("modal",{staticClass:"coupon-editor-modal",attrs:{size:"small-medium"},on:{close:function(s){t.isShowStock=!1}}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("assignment")]),t._v("Product's Stock")])]),e("div",{attrs:{slot:"body"},slot:"body"},[e("p",{staticClass:"h3 mb-3"},[t._v(t._s(t.selectedProduct.name))]),e("div",[e("div",{staticClass:"product-stock-info alert alert-info text-center",class:{"alert-danger":t.selectedProductStock<=0}},[e("div",{staticClass:"product-stock-qty"},[t._v(t._s(t.formatNumber(t.selectedProductStock)))]),e("div",[t._v("Total Stock")]),e("hr"),e("router-link",{staticClass:"btn-stock-history btn btn-text d-flex justify-content-center align-items-center",attrs:{to:"/inventory?product_id="+t.selectedProduct._id.$oid,_target:"_blank"}},[e("i",{staticClass:"material-icons mr-2"},[t._v("history")]),e("span",[t._v("See Stock History")])])],1),"variable"===t.selectedProduct.type?e("div",[e("p",{staticClass:"mb-2"},[e("b",[t._v("Variation's Stock")])]),e("div",{staticClass:"card"},t._l(t.selectedProduct.variations.prices,function(s,i){return e("div",{key:i,staticClass:"product-stock-variation d-flex justify-content-between"},[e("div",{staticClass:"product-stock-variation-name"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(s.name.split("||").join(" - "))+"\n\t\t\t\t\t\t\t\t")]),e("div",{staticClass:"product-stock-variation-qty"},[s.stock?e("div",[e("b",[t._v(t._s(t.formatNumber(s.stock.quantity)))])]):e("div",[t._v("-")])])])}),0)]):t._e()])])]):t._e(),t.isShowTracking?e("modal",{staticClass:"coupon-editor-modal",attrs:{size:"large",full:!0,"hide-footer":!0},on:{close:function(s){t.isShowTracking=!1}}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("code")]),t._v("Product's Tracking")])]),e("div",{attrs:{slot:"body"},slot:"body"},[e("product-tracking",{attrs:{"product-ids":t.selectedProducts,"pixel-events":t.pixelEvents,"pixel-ids":t.pixelIds,"gtm-ids":t.gtmIds},on:{cancel:function(s){t.isShowTracking=!1}}})],1)]):t._e(),t.isShowAssignation?e("modal",{staticClass:"coupon-editor-modal",attrs:{size:"medium"},on:{close:function(s){t.isShowAssignation=!1}}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("people")]),t._v("Product's Assignation")])]),e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticClass:"alert alert-warning mb-4"},[t._v("\n\t\t\t\t\tPlease be aware, that this settings will override all assignation settings on the selected products.\n\t\t\t\t")]),e("product-belongs-to",{ref:"assignation",attrs:{"product-ids":t.selectedProducts,members:t.members,"belongs-to":t.belongsTo,distribution:t.orderDistribution},on:{"update:members":function(s){t.members=s},"update:belongsTo":function(s){t.belongsTo=s},"update:belongs-to":function(s){t.belongsTo=s},"update:distribution":function(s){t.orderDistribution=s}}})],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(s){t.isShowAssignation=!1}}},[t._v("Close")]),e("button",{staticClass:"btn btn-primary",class:{"is-loading":t.$refs.assignation&&t.$refs.assignation.isSaving},attrs:{type:"button"},on:{click:function(s){return t.$refs.assignation.onSave()}}},[t._v("Save")])])]):t._e(),t.isShowEditVisibility?e("modal",{attrs:{size:"medium",full:!0,"hide-footer":!0},on:{close:function(s){t.isShowEditVisibility=!1}}},[e("template",{slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("visibility")]),t._v("Product's Visibility on Storefront")])]),e("template",{slot:"body"},[e("div",{staticClass:"p-4"},[e("div",{staticClass:"alert alert-warning mb-4"},[t._v("\n\t\t\t\t\t\tPlease be aware, that this settings will override all visibility settings on the selected products.\n\t\t\t\t\t")]),e("div",{staticClass:"form-group"},[e("checkbox-toggle",{attrs:{label:"Visible on Storefront"},model:{value:t.isVisible,callback:function(s){t.isVisible=s},expression:"isVisible"}})],1)]),e("div",{staticClass:"modal-footer text-right"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateVisibility}},[t._v("Update")])])])],2):t._e(),t.isShowFollowUp?e("modal",{staticClass:"product-follow-up-modal",attrs:{size:"large",full:!0,"hide-footer":!0},on:{close:function(s){t.isShowFollowUp=!1}}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("title")]),t._v("Follow-up Text")])]),e("div",{attrs:{slot:"body"},slot:"body"},[e("product-follow-up",{attrs:{"product-ids":t.selectedProducts},on:{cancel:function(s){t.isShowFollowUp=!1}}})],1)]):t._e(),t.isShowFilter?e("modal",{staticClass:"table-filter-modal",attrs:{size:"medium"},on:{close:function(s){t.isShowFilter=!1}}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[e("i",{staticClass:"material-icons"},[t._v("filter_list")]),t._v("Filter Products")])]),e("div",{attrs:{slot:"body"},slot:"body"},[e("product-category",{attrs:{data:t.selectedCategory},on:{change:t.onCategoryChange}}),t.isStorefrontActive?e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold"},[t._v("Storefront Visibility")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.publicStatus,expression:"publicStatus"}],staticClass:"form-control",on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.publicStatus=s.target.multiple?e:e[0]}}},t._l(t.publicOptions,function(s,i){return e("option",{key:i,domProps:{value:s.key}},[t._v(t._s(s.label))])}),0)]):t._e()],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(s){t.isShowFilter=!1}}},[t._v("Close")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.applyFilter}},[t._v("Apply Filter")])])]):t._e()],1),e("notifications",{attrs:{group:"products",position:"bottom right"}})],1)},o=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"col-md-9"},[e("h1",{staticClass:"page-title"},[t._v("Products")])])}],a=(e("8e6e"),e("456d"),e("7514"),e("ac6a"),e("7f7f"),e("20d6"),e("55dd"),e("bd86")),r=e("2f62"),n=e("714b"),c=e("2411"),l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"product-tracking"},[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"alert alert-warning mb-4"},[t._v("\n\t\t\tPlease be aware, that this settings will override all tracking settings on the selected products form.\n\t\t")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("box-tracking",{attrs:{title:"Form Page Tracking","pixel-ids":t.pixelIds,"pixel-events":t.pixelEvents,"selected-pixel-ids":t.pixel.ids,"selected-pixel-events":t.pixel.events,"gtm-ids":t.gtmIds,"selected-gtm-ids":t.gtm.ids,"pixel-configs":t.pixelConfigs},on:{"update:pixelConfigs":function(s){t.pixelConfigs=s},"update:pixel-configs":function(s){t.pixelConfigs=s}}})],1),e("div",{staticClass:"col-md-6"},[e("box-tracking",{attrs:{title:"Success Page Tracking","pixel-ids":t.pixelIds,"pixel-events":t.pixelEvents,"selected-pixel-ids":t.pixelSuccess.ids,"selected-pixel-events":t.pixelSuccess.events,"gtm-ids":t.gtmIds,"selected-gtm-ids":t.gtmSuccess.ids,"pixel-configs":t.pixelSuccessConfigs},on:{"update:pixelConfigs":function(s){t.pixelSuccessConfigs=s},"update:pixel-configs":function(s){t.pixelSuccessConfigs=s}}})],1)])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(s){return t.$emit("cancel")}}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-primary",class:{"is-loading":t.isSaving},attrs:{type:"button"},on:{click:t.save}},[t._v("Save")])])])},d=[],u=e("b4e8"),p=e("6b5f"),h=e("9af2"),v=e("4c79");function g(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);s&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,i)}return e}function b(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?g(e,!0).forEach(function(s){Object(a["a"])(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(e).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}var m={name:"ProductTracking",props:{productIds:{type:Array,default:function(){return[]}},pixelIds:{type:Array,default:function(){return[]}},gtmIds:{type:Array,default:function(){return[]}},pixelEvents:{type:Array,default:function(){return[]}}},components:{BoxTracking:u["a"]},data:function(){return{pixel:{ids:[],events:[]},pixelSuccess:{ids:[],events:[]},gtm:{ids:[],events:[]},gtmSuccess:{ids:[],events:[]},pixelConfigs:[],pixelSuccessConfigs:[],isSaving:!1}},methods:{save:function(){var t=this;this.isSaving=!0;var s=JSON.stringify(this.productIds),e=JSON.stringify(this.trackingData),i={product_ids:s,tracking:e},o=function(){t.isSaving=!1,t.$notify({group:"app",type:"success",title:"Product Tracking",text:"Updated successfully"}),t.$emit("cancel")},a=function(){t.isSaving=!1,t.$notify({group:"app",type:"error",title:"Product Tracking",text:"Something error, please try again"})};v["a"].updateTracking(i,o,a)}},computed:{trackingData:function(){var t=function(t){return function(s){var e=t.find(function(t){var e=t.name;return e===s}),i=e||b({name:s},h["db"]);return i}},s=Object(p["m"])(this.pixel),e=s.events.map(t(this.pixelConfigs));s.events=e;var i=Object(p["m"])(this.pixelSuccess),o=i.events.map(t(this.pixelSuccessConfigs));i.events=o;var a={form:{pixel:s,gtm:this.gtm},success:{pixel:i,gtm:this.gtmSuccess}};return a}}},f=m,_=e("2877"),y=Object(_["a"])(f,l,d,!1,null,null,null),C=y.exports,P=e("f03d"),w=e("d96f"),S=e("ad99"),k=e("995e"),x=e("c24f");function D(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);s&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,i)}return e}function O(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?D(e,!0).forEach(function(s){Object(a["a"])(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):D(e).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}var A=function(){return Promise.all([e.e("apps-installed~followUp~product-details~storefront"),e.e("followUp")]).then(e.bind(null,"02ed"))},$=Object(p["L"])(),F={name:"products",components:{Modal:n["a"],Daterangepicker:c["a"],Overview:w["a"],ProductTracking:C,ProductBelongsTo:P["a"],ProductFollowUp:A,ProductCategory:S["a"],CheckboxToggle:k["a"]},data:function(){return{productName:"",keyword:"",limit:25,sort_by:"name",sort:"asc",filterDate:$,isShowDeleteProduct:!1,isShowDuplicateProduct:!1,isShowDeleteProductBulk:!1,isShowStock:!1,selectedProduct:null,selectedProducts:[],isDeleting:!1,isFetchingForms:!1,isDuplicatingProduct:!1,isRouteChecked:!1,isFetchingStock:!1,stockHistories:[],totalProducts:0,totalQtySold:0,totalPaidOrder:0,isShowTracking:!1,isShowAssignation:!1,members:[],belongsTo:[],orderDistribution:{},isShowFollowUp:!1,isShowFilter:!1,selectedCategory:Object(p["m"])(h["O"]),isShowEditVisibility:!1,isVisible:!0,isSavingVisibility:!1,publicStatus:"all",publicOptions:[{key:"all",label:"All"},{key:"visible",label:"Visible"},{key:"invisible",label:"Not Visible"}],isExporting:!1,isImporting:!1,isImportVisible:!1}},methods:O({},Object(r["b"])({getProducts:"products/getProducts",resetProducts:"products/resetProducts",delete:"products/delete",setStorefrontStatus:"setStorefrontStatus"}),{initData:function(){this.categoryParam&&(this.selectedCategory.category_slug=this.categoryParam),this.subCategoryParam&&(this.selectedCategory.sub_category_slug=this.subCategoryParam),this.subSubCategoryParam&&(this.selectedCategory.sub_sub_category_slug=this.subSubCategoryParam),this.isPublicQuery&&(this.publicStatus="1"===this.isPublicQuery?"visible":"invisible")},getParams:function(){var t="YYYY-MM-DD",s=this.moment(this.filterDate.start).format(t),e=this.moment(this.filterDate.end).format(t),i={limit:this.limit,sort_by:this.sort_by,sort:this.sort,page:this.page,since:s,until:e};return this.keyword&&""!==this.keyword&&(i.keyword=this.keyword),this.selectedCategory.category_slug&&(i.category_slug=this.selectedCategory.category_slug),this.selectedCategory.sub_category_slug&&(i.sub_category_slug=this.selectedCategory.sub_category_slug),this.selectedCategory.sub_sub_category_slug&&(i.sub_sub_category_slug=this.selectedCategory.sub_sub_category_slug),"all"!==this.publicStatus&&(i.is_public="visible"===this.publicStatus?1:0),i},fetchProducts:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this.resetProducts();var s=this.getParams();this.getProducts(s)},onKeywordChange:function(){var t=this;this.ooDelay(function(){t.fetchProducts()},1e3)},handleScroll:function(){var t=document.documentElement.offsetHeight,s=window.innerHeight,e=window.scrollY,i=50,o=t-i<=s+e;o&&(this.isFetching||this.isAll||this.fetchProducts(!1))},bulkDelete:function(){var t=this;this.isDeleting=!0;var s=function(){t.isDeleting=!1;for(var s=function(s){var e=t.selectedProducts[s],i=t.products.findIndex(function(t){return t._id.$oid===e}),o=-1!==i;o&&t.delete(i)},e=0;e<t.selectedProducts.length;e++)s(e);t.$set(t,"selectedProducts",[]),t.isShowDeleteProductBulk=!1,t.$notify({group:"products",title:"Products",text:"Products deleted",type:"success"})};v["a"].bulkDelete(this.selectedProducts.slice(),s)},deleteProduct:function(){var t=this;this.isDeleting=!0;var s=function(){t.isDeleting=!1;var s=t.selectedProduct._id.$oid,e=t.products.findIndex(function(t){return t._id.$oid===s}),i=-1!==e;i&&t.delete(e),t.$set(t,"selectedProduct",null),t.isShowDeleteProduct=!1,t.$notify({group:"products",title:"Products",text:"Product deleted",type:"success"})};v["a"].bulkDelete([this.selectedProduct._id.$oid],s)},changeSorting:function(t){var s=this.sort_by===t;this.sort_by=t;var e=s&&"asc"===this.sort?"desc":"asc";this.sort=e,this.fetchProducts(!0)},sortClass:function(t){var s=this.sort_by===t,e=s?"th-sort-".concat(this.sort):"";return e},checkoutUrlFull:function(t){return Object(p["I"])(this.user.username,t)},showConfirmDeleteProduct:function(t){this.selectedProduct=t,this.isShowDeleteProduct=!0},showConfirmDuplicateProduct:function(t){this.selectedProduct=t,this.isShowDuplicateProduct=!0},duplicateProduct:function(t){var s=this;this.isDuplicatingProduct=!0;var e=function(t){var e=t.message;s.isDuplicatingProduct=!1,s.isShowDuplicateProduct=!1,s.$notify({group:"products",title:"Product",text:e,type:"success"}),s.fetchProducts()},i=function(t){console.log(t);var e=t.response.data.message;s.isDuplicatingProduct=!1,s.isShowDuplicateProduct=!1,s.$notify({group:"products",title:"Product",text:e,type:"error"})};v["a"].duplicate(t,e,i)},checkCapabilities:function(){this.isUserCan("product_view")?this.isRouteChecked=!0:this.$router.push("/")},getStockQuantity:function(t){var s="simple"===t.type,e=s?t.stock.quantity:t.variations.prices.reduce(function(t,s){var e=s.stock?s.stock.quantity:0,i=t+e;return i},0);return e},getStockQuantityClass:function(t){var s=this.getStockQuantity(t),e=s>0?"text-success":"text-danger";return e},showStock:function(t){this.selectedProduct=t,this.isShowStock=!0},formatNumber:function(t){return Object(p["s"])(t,0,",",".")},initFilterDate:function(){if(this.since&&""!==this.since&&this.until&&""!==this.until){var t=this.moment(this.since),s=this.moment(this.until),e={start:t,end:s};this.filterDate=e}},setFilterDate:function(t){this.filterDate=t;var s="YYYY-MM-DD",e=this.moment(t.start).format(s),i=this.moment(t.end).format(s),o=Object(p["m"])(this.$route.query);o.since=e,o.until=i;var a={query:o};this.$router.push(a),this.fetchProducts()},onCategoryChange:function(t){"category"===t.type?(this.selectedCategory.category=t.name,this.selectedCategory.category_slug=t.slug):"sub_category"===t.type?(this.selectedCategory.sub_category=t.name,this.selectedCategory.sub_category_slug=t.slug):"sub_sub_category"===t.type&&(this.selectedCategory.sub_sub_category=t.name,this.selectedCategory.sub_sub_category_slug=t.slug)},applyFilter:function(){var t={};""!==this.selectedCategory.category_slug?t.category=this.selectedCategory.category_slug:delete t.category,""!==this.selectedCategory.sub_category_slug?t.sub_category=this.selectedCategory.sub_category_slug:delete t.sub_category,""!==this.selectedCategory.sub_sub_category_slug?t.sub_sub_category=this.selectedCategory.sub_sub_category_slug:delete t.sub_sub_category,"all"!==this.publicStatus?t.is_public="visible"===this.publicStatus?1:0:delete t.is_public;var s={query:t};this.$router.push(s),this.isShowFilter=!1,this.fetchProducts(!0)},clearFilter:function(){this.selectedCategory=Object(p["m"])(h["O"]),this.applyFilter()},fetchStorefrontStatus:function(){var t=this,s="5c359d8e215076fe8903d779",e=function(s){var e=s.data.is_active;t.setStorefrontStatus(e)};x["a"].getAddonStatus(s,e)},updateVisibility:function(){var t=this;this.isSavingVisibility=!0;var s=JSON.stringify(this.selectedProducts),e={product_ids:s,is_public:this.isVisible},i=function(){t.isSaving=!1,t.$notify({group:"app",type:"success",title:"Product Visibility",text:"Updated successfully"}),t.isSavingVisibility=!1,t.isShowEditVisibility=!1},o=function(){t.isSaving=!1,t.$notify({group:"app",type:"error",title:"Product Visibility",text:"Something error, please try again"}),t.isSavingVisibility=!1};v["a"].updateVisibilityBulk(e,i,o)},exportProducts:function(t){var s=this;this.isExporting=!0;var e=this.getParams(),i=Object(p["m"])(e);i.file_type=t;var o=function(t){s.isExporting=!1;var e=t.data;Object(p["l"])(e)},a=function(){s.isExporting=!1};v["a"].exportProducts(i,o,a)}}),computed:O({},Object(r["c"])({user:"user",isAdmin:"isAdmin",isUserCan:"isUserCan",products:"products/allProducts",isFetching:"products/isFetching",isAll:"products/isAll",page:"products/page",pageInfo:"products/pageInfo",isFetched:"products/isFetched",filterDatePresets:"filterDatePresets",pixelIds:"pixelIds",pixelEvents:"pixelEvents",gtmIds:"gtmIds",isStorefrontActive:"isStorefrontActive"}),{selectAll:{get:function(){return!!this.products&&this.selectedProducts.length===this.products.length},set:function(t){var s=[];t&&this.products.forEach(function(t){s.push(t._id.$oid)}),this.selectedProducts=s}},isCanDeleteProduct:function(){return this.isUserCan("product_delete")},selectedProductsData:function(){var t=this,s=function(s){var e=t.selectedProducts.find(function(t){return t===s._id.$oid});return e},e=this.products.filter(s);return e},selectedProductStock:function(){var t=Object(p["db"])(this.selectedProduct);return t},since:function(){var t=this.$route.query.since;return t},until:function(){var t=this.$route.query.until;return t},categoryParam:function(){return this.$route.query.category},subCategoryParam:function(){return this.$route.query.sub_category},subSubCategoryParam:function(){return this.$route.query.sub_sub_category},isPublicQuery:function(){return this.$route.query.is_public},isFilterOn:function(){return this.categoryParam||this.subCategoryParam||this.subSubCategoryParam}}),watch:{user:function(){this.initFilterDate(),this.checkCapabilities(),this.fetchStorefrontStatus()},pageInfo:function(t){var s=t.total_all_products;this.totalProducts=s,this.totalQtySold=t.total_quantity_sold,this.totalPaidOrder=t.total_paid_order}},created:function(){this.initData(),this.user&&(this.initFilterDate(),this.checkCapabilities(),this.fetchStorefrontStatus()),this.fetchProducts(),window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},j=F,T=Object(_["a"])(j,i,o,!1,null,null,null);s["default"]=T.exports}}]);
//# sourceMappingURL=products.c6ddac10.js.map