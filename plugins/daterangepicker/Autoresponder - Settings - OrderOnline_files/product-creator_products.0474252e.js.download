(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product-creator~products"],{"995e":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("label",{staticClass:"label-toggle d-block"},[s("input",{staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:e.value},on:{change:e.onChange}}),s("div",{staticClass:"toggle-btn d-inline-block"}),s("span",{staticClass:"input-checkbox-text"},[e._v(e._s(e.label))])])])},o=[],n={name:"CheckboxToggle",props:{value:{type:Boolean,default:!1},label:{type:String,default:""}},methods:{onChange:function(e){var t=e.target.checked;this.$emit("input",t)}}},a=n,r=s("2877"),l=Object(r["a"])(a,i,o,!1,null,null,null);t["a"]=l.exports},ad99:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"product-categories-selection"},[s("div",{staticClass:"form-group mb-3"},[e._m(0),s("multiselect",{attrs:{placeholder:"Select Category",label:"name","track-by":"slug",options:e.categories,"show-labels":!1,"allow-empty":!1,loading:e.isFetchingCategories,disabled:0===e.categories.length},on:{select:e.onCategoryChange},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),s("div",{staticClass:"row"},[e.category&&e.subCategories.length>0?s("div",{staticClass:"col-sm-6"},[s("div",{staticClass:"form-group"},[s("multiselect",{attrs:{placeholder:"Select Category",label:"name","track-by":"slug",options:e.subCategories,"show-labels":!1,"allow-empty":!1,loading:e.isFetchingCategories,disabled:0===e.subCategories.length},on:{select:e.onCategoryChange},model:{value:e.subCategory,callback:function(t){e.subCategory=t},expression:"subCategory"}})],1)]):e._e(),e.subCategory&&e.subSubCategories.length>0?s("div",{staticClass:"col-sm-6"},[s("div",{staticClass:"form-group"},[s("multiselect",{attrs:{placeholder:"Select Category",label:"name","track-by":"slug",options:e.subSubCategories,"show-labels":!1,"allow-empty":!0,loading:e.isFetchingCategories,disabled:0===e.subSubCategories.length},on:{select:e.onCategoryChange},model:{value:e.subSubCategory,callback:function(t){e.subSubCategory=t},expression:"subSubCategory"}})],1)]):e._e()])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",[s("b",[e._v("Product Category")])])}],n=(s("7514"),s("4c79")),a={name:"ProductCategory",props:{data:{type:Object}},data:function(){return{isFetchingCategories:!1,categories:[],subCategories:[],subSubCategories:[],category:null,subCategory:null,subSubCategory:null}},methods:{fetchCategories:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"category",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.isFetchingCategories=!0;var i=function(s){e.isFetchingCategories=!1;var i=s.data;"category"===t?e.categories=i:"sub_category"===t?e.subCategories=i:"sub_sub_category"===t&&(e.subSubCategories=i)},o=function(){e.isFetchingCategories=!1};n["a"].getCategories(s,i,o)},onCategoryChange:function(e){this.$emit("change",e),"category"===e.type?(this.subCategories=[],this.subSubCategories=[],this.subCategory=null,this.subSubCategory=null,this.fetchCategories("sub_category",e._id)):"sub_category"===e.type&&(this.subSubCategories=[],this.subSubCategory=null,this.fetchCategories("sub_sub_category",e._id))}},created:function(){this.fetchCategories()},watch:{categories:function(e){var t=this,s=e.find(function(e){return e.slug===t.data.category_slug});s&&(this.category=s)},subCategories:function(e){var t=this,s=e.find(function(e){return e.slug===t.data.sub_category_slug});this.subCategory=s||null},subSubCategories:function(e){var t=this,s=e.find(function(e){return e.slug===t.data.sub_sub_category_slug});this.subSubCategory=s||null},category:function(e){this.onCategoryChange(e)},subCategory:function(e){if(e)this.onCategoryChange(e);else{var t={name:"",slug:"",type:"sub_category"};this.$emit("change",t)}},subSubCategory:function(e){if(!e){var t={name:"",slug:"",type:"sub_sub_category"};this.$emit("change",t)}}}},r=a,l=s("2877"),c=Object(l["a"])(r,i,o,!1,null,null,null);t["a"]=c.exports},b4e8:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pc-tracking pc-box box"},[s("div",{staticClass:"box__title"},[s("span",{staticClass:"box__icon icon icon-tracking-orange"}),e._v(e._s(e.title))]),s("div",{staticClass:"box__content"},[s("div",{staticClass:"mb-5"},[e._m(0),s("div",{staticClass:"form-group"},[s("label",[e._v("Pixel IDs")]),e.selectedPixelIds.length>0?s("div",{staticClass:"selected-options"},e._l(e.selectedPixelIds,function(t,i){return s("div",{key:i,staticClass:"selected-option"},[s("span",[e._v(e._s(t))]),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Remove",expression:"'Remove'"}],staticClass:"material-icons selected-option-remove",on:{click:function(t){return e.removePixelId(i)}}},[e._v("close")])])}),0):e._e(),s("multiselect",{attrs:{placeholder:"Input or Select Pixel ID",options:e.unselectedPixelIds,"hide-selected":!0,multiple:!0,taggable:!0,"reset-after":!0,"show-labels":!1,"tag-placeholder":"Press enter to insert Pixel ID"},on:{tag:e.addPixelId,select:e.addPixelId}})],1),s("div",{staticClass:"form-group"},[s("label",[e._v("Pixel Events")]),e.selectedPixelEvents.length>0?s("div",{staticClass:"selected-options"},e._l(e.selectedPixelEvents,function(t,i){return s("div",{key:i,staticClass:"selected-option flex-center justify-content-between"},[s("span",[e._v(e._s(t))]),e.configurable?s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Parameters Config",expression:"'Parameters Config'"}],staticClass:"material-icons selected-option-action ml-a mr-2",on:{click:function(s){return e.showConfig(t)}}},[e._v("settings")]):e._e(),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Remove",expression:"'Remove'"}],staticClass:"material-icons selected-option-action selected-option-remove",on:{click:function(t){return e.removePixelEvent(i)}}},[e._v("close")])])}),0):e._e(),s("multiselect",{attrs:{placeholder:"Input or Select Pixel Event",options:e.unselectedPixelEvents,"hide-selected":!0,multiple:!0,taggable:!0,"reset-after":!0,"show-labels":!1,"tag-placeholder":"Press enter to insert Pixel Event"},on:{tag:e.addPixelEvent,select:e.addPixelEvent}})],1)]),s("div",{staticClass:"mb-5"},[e._m(1),s("div",{staticClass:"form-group"},[s("label",[e._v("GTM IDs")]),e.selectedGtmIds.length>0?s("div",{staticClass:"selected-options"},e._l(e.selectedGtmIds,function(t,i){return s("div",{key:i,staticClass:"selected-option"},[s("span",[e._v(e._s(t))]),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Remove",expression:"'Remove'"}],staticClass:"material-icons selected-option-remove",on:{click:function(t){return e.removeGtmId(i)}}},[e._v("close")])])}),0):e._e(),s("multiselect",{attrs:{placeholder:"Input or Select GTM ID",options:e.unselectedGtmIds,"hide-selected":!0,multiple:!0,taggable:!0,"reset-after":!0,"show-labels":!1,"tag-placeholder":"Press enter to insert GTM ID"},on:{tag:e.addGtmId,select:e.addGtmId}})],1)]),s("div",{},[e._m(2),s("div",{staticClass:"form-group"},[s("label",[e._v("TikTok Pixel IDs")]),e.selectedTiktokPixelIds.length>0?s("div",{staticClass:"selected-options"},e._l(e.selectedTiktokPixelIds,function(t,i){return s("div",{key:i,staticClass:"selected-option"},[s("span",[e._v(e._s(t))]),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Remove",expression:"'Remove'"}],staticClass:"material-icons selected-option-remove",on:{click:function(t){return e.removeTiktokId(i)}}},[e._v("close")])])}),0):e._e(),s("multiselect",{attrs:{placeholder:"Input or Select TikTok Pixel ID",options:e.unselectedTiktokPixelIds,"hide-selected":!0,multiple:!0,taggable:!0,"reset-after":!0,"show-labels":!1,"tag-placeholder":"Press enter to insert TikTok Pixel ID"},on:{tag:e.addTiktokPixelId,select:e.addTiktokPixelId}})],1)])]),s("div",{staticClass:"modals"},[e.isShowConfig?s("modal",{staticClass:"pixel-settings-modal",attrs:{size:"medium"},on:{close:function(t){e.isShowConfig=!1}}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("h3",[e._v("Pixel Event Settings")])]),s("div",{attrs:{slot:"body"},slot:"body"},[s("h5",{staticClass:"mb-4"},[e._v("Event: "+e._s(e.selectedPixel.name))]),e._l(e.selectedPixelKeys,function(t,i){return s("div",{key:i,staticClass:"row"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"form-group"},[s("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t}})])]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},["currency"===t||"page"===e.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedPixel[t],expression:"selectedPixel[pixelKey]"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Param Value"},domProps:{value:e.selectedPixel[t]},on:{input:function(s){s.target.composing||e.$set(e.selectedPixel,t,s.target.value)}}}):s("multiselect",{attrs:{placeholder:"Param Value",options:e.pixelValueTokens,multiple:!1,taggable:!0,"reset-after":!1,"show-labels":!1,"tag-placeholder":"Press enter to set value"},on:{tag:function(s){var i=arguments.length,o=Array(i);while(i--)o[i]=arguments[i];return e.addValue.apply(void 0,[t].concat(o))}},model:{value:e.selectedPixel[t],callback:function(s){e.$set(e.selectedPixel,t,s)},expression:"selectedPixel[pixelKey]"}})],1)]),s("div",{staticClass:"col-md-1 p-0"},[s("button",{staticClass:"btn btn-plain",attrs:{type:"button"},on:{click:function(s){return e.removeParam(t)}}},[s("i",{staticClass:"material-icons"},[e._v("close")])])])])}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("label",[e._v("Add More Parameter")]),s("multiselect",{staticClass:"form-control",attrs:{placeholder:"Select or type to add new param",options:e.pixelEventKeys,"show-labels":!1,taggable:!0},on:{select:e.onPixelParamSelected,tag:e.addCustomParam}})],1)])],2),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"btn btn-default",on:{click:function(t){e.isShowConfig=!1}}},[e._v("Cancel")]),s("button",{staticClass:"btn btn-primary",on:{click:e.saveConfig}},[e._v("Save")])])]):e._e()],1)])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("b",[e._v("Facebook Pixel")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("b",[e._v("Google Tag Manager")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("b",[e._v("TikTok Pixel")])])}],n=(s("8e6e"),s("ac6a"),s("456d"),s("a481"),s("20d6"),s("7514"),s("7f7f"),s("bd86")),a=s("2f62"),r=s("714b"),l=s("9af2"),c=s("6b5f"),u=s("c24f");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach(function(t){Object(n["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var m={name:"box-tracking",props:{title:{type:String,default:"Tracking"},pixelIds:{},pixelEvents:{},selectedPixelIds:{},selectedPixelEvents:{},gtmIds:{},selectedGtmIds:{},pixelConfigs:{type:Array,default:function(){return[]}},configurable:{type:Boolean,default:!0},tiktokPixelIds:{type:Array,default:function(){return[]}},selectedTiktokPixelIds:{type:Array,default:function(){return[]}},type:{type:String,default:"form"},useDefault:{type:Boolean,default:!0}},components:{Modal:r["a"]},data:function(){return{pixelEventKeys:l["bc"],pixelValueTokens:l["dc"],selectedPixelName:null,selectedPixel:null,isShowConfig:!1}},methods:{addPixelId:function(e){e=e.trim(),this.selectedPixelIds.push(e);var t=Object(c["m"])(this.pixelIds);-1===t.indexOf(e)&&(t.push(e),u["a"].udpatePixelIds(t))},removePixelId:function(e){this.selectedPixelIds.splice(e,1)},addPixelEvent:function(e){e=e.trim(),this.selectedPixelEvents.push(e);var t=Object(c["m"])(this.pixelConfigs),s=this.useDefault?l["db"]:{},i=b({name:e},s);t.push(i),this.$emit("update:pixelConfigs",t)},removePixelEvent:function(e){this.selectedPixelEvents.splice(e,1)},addGtmId:function(e){e=e.trim(),this.selectedGtmIds.push(e);var t=Object(c["m"])(this.gtmIds);-1===t.indexOf(e)&&(t.push(e),u["a"].udpateGTMIds(t))},removeGtmId:function(e){this.selectedGtmIds.splice(e,1)},normalizeConfigs:function(){var e=this.useDefault?l["db"]:{},t=function(t){var s=b({name:t.name},e),i=b({},s,{},t);return i},s=this.pixelConfigs.map(t);this.$emit("update:pixelConfigs",s)},showConfig:function(e){var t=this.pixelConfigs.find(function(t){var s=t.name;return s===e});t?this.selectedPixel=t:this.useDefault?this.selectedPixel=l["db"]:this.selectedPixel={},this.isShowConfig=!0},saveConfig:function(){var e=this,t=Object(c["m"])(this.pixelConfigs),s=t.findIndex(function(t){var s=t.name;return s===e.selectedPixel.name});-1!==s&&(t[s]=Object(c["m"])(this.selectedPixel)),this.$emit("update:pixelConfigs",t),this.isShowConfig=!1},addValue:function(e,t){this.$set(this.selectedPixel,e,t)},onPixelParamSelected:function(e){this.$set(this.selectedPixel,e,"")},addCustomParam:function(e){var t=e.trim().replace(/\s+/g,"_");this.$set(this.selectedPixel,t,"")},removeParam:function(e){this.$delete(this.selectedPixel,e)},addTiktokPixelId:function(e){e=e.trim(),this.selectedTiktokPixelIds.push(e);var t=Object(c["m"])(this.tiktokPixelIds);-1===t.indexOf(e)&&t.push(e)},removeTiktokId:function(e){this.selectedTiktokPixelIds.splice(e,1)}},computed:b({},Object(a["c"])({isAdmin:"isAdmin"}),{unselectedPixelIds:function(){var e=this;return this.pixelIds.filter(function(t){return-1===e.selectedPixelIds.indexOf(t)})},unselectedPixelEvents:function(){var e=this;return this.pixelEvents.filter(function(t){return-1===e.selectedPixelEvents.indexOf(t)})},unselectedGtmIds:function(){var e=this;return this.gtmIds.filter(function(t){return-1===e.selectedGtmIds.indexOf(t)})},unselectedTiktokPixelIds:function(){var e=this;return this.tiktokPixelIds.filter(function(t){return-1===e.selectedTiktokPixelIds.indexOf(t)})},selectedPixelKeys:function(){var e=this.selectedPixel?Object.keys(this.selectedPixel):[];return e.filter(function(e){return"name"!==e})}}),created:function(){this.normalizeConfigs()}},g=m,p=s("2877"),f=Object(p["a"])(g,i,o,!1,null,null,null);t["a"]=f.exports},f03d:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"product-belongs-to"},[e.distribution&&e.members.length>0?s("div",[s("ul",{staticClass:"nav nav-tabs nav-fill",attrs:{role:"tablist"}},e._l(e.roles,function(t){return s("li",{key:t.value,staticClass:"nav-item",attrs:{role:"tab"},on:{click:function(s){e.selectedRole=t}}},[s("a",{staticClass:"nav-link",class:{active:t.value===e.selectedRole.value}},[e._v(e._s(t.label))])])}),0),s("div",{staticClass:"tab-content"},[s("div",{staticClass:"box mb-0 bt-0"},[s("div",{staticClass:"product-belongs-to-members"},[s("div",{staticClass:"form-group mb-3"},[s("multiselect",{staticClass:"form-control",attrs:{label:"name","track-by":"_id",placeholder:"Select "+e.selectedRole.label,"reset-after":!0,options:e.options,"show-labels":!1,loading:e.isFetchingMembers},on:{select:e.addBelongsTo}})],1),e.belongsToMembers.length>0?s("div",{staticClass:"selected-options"},["cs"===e.selectedRole.value?e._l(e.teamMembersCS,function(t,i){return s("div",{key:i,staticClass:"selected-option product-belongs-to-member",class:["role-"+t.role]},[s("div",[s("span",{staticClass:"text-semibold"},[e._v(e._s(t.name))]),!e.getQuota(t._id)||"percentage"!==e.distribution.type&&"fixed"!==e.distribution.type?e._e():s("span",{staticClass:"ml-1"},[e._v("\n\t\t\t\t\t\t\t\t\t\t(Order's Left: "+e._s(e.getQuota(t._id))+")\n\t\t\t\t\t\t\t\t\t")]),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Remove",expression:"'Remove'"}],staticClass:"material-icons selected-option-remove",on:{click:function(s){return e.removeBelongsTo(t._id)}}},[e._v("close")])]),"cs"===e.selectedRole.value&&"percentage"===e.distribution.type?s("div",{staticClass:"product-belongs-to-distribution row"},[s("div",{staticClass:"col-1"},[s("span",[e._v(e._s(e.distributionPercentages[i])+"%")])]),s("div",{staticClass:"col-11"},[s("vue-slider",{staticClass:"member-distribution-slider",attrs:{value:0,min:0,max:100,dotSize:16,height:8,lazy:!1,tooltip:"focus",reverse:!1,tooltipFormatter:"Order's Distribution: {value}%",processStyle:{backgroundColor:"#75cfd8"},tooltipStyle:{backgroundColor:"#4e4e4e",borderColor:"#4e4e4e"}},on:{dragging:e.onSliderChange},model:{value:e.distributionPercentages[i],callback:function(t){e.$set(e.distributionPercentages,i,t)},expression:"distributionPercentages[index]"}})],1)]):e._e(),"cs"===e.selectedRole.value&&"fixed"===e.distribution.type?s("div",{staticClass:"product-belongs-to-distribution row"},[s("div",{staticClass:"col-1"},[s("span",[e._v(e._s(e.rates[i]))])]),s("div",{staticClass:"col-11"},[s("vue-slider",{staticClass:"member-distribution-slider",attrs:{value:0,min:0,max:10,dotSize:16,height:8,lazy:!1,tooltip:"focus",reverse:!1,tooltipFormatter:"Order's Rate: {value}",processStyle:{backgroundColor:"#75cfd8"},tooltipStyle:{backgroundColor:"#4e4e4e",borderColor:"#4e4e4e"}},on:{dragging:e.onRateChange},model:{value:e.rates[i],callback:function(t){e.$set(e.rates,i,t)},expression:"rates[index]"}})],1)]):e._e()])}):e._l(e.belongsToMembers,function(t,i){return s("div",{key:i,staticClass:"selected-option product-belongs-to-member",class:["role-"+t.role]},[s("div",[s("span",{staticClass:"text-semibold"},[e._v(e._s(t.name))]),!e.getQuota(t._id)||"percentage"!==e.distribution.type&&"fixed"!==e.distribution.type?e._e():s("span",{staticClass:"ml-1"},[e._v("\n\t\t\t\t\t\t\t\t\t\t(Order's Left: "+e._s(e.getQuota(t._id))+")\n\t\t\t\t\t\t\t\t\t")]),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Remove",expression:"'Remove'"}],staticClass:"material-icons selected-option-remove",on:{click:function(s){return e.removeBelongsTo(t._id)}}},[e._v("close")])])])})],2):s("div",{staticClass:"modal-empty-data text-center"},[e._v(e._s(e.emptyMessage))]),"cs"===e.selectedRole.value&&e.belongsToMembers.length>0?s("div",["percentage"===e.distribution.type?s("div",{staticClass:"mb-2 text-right"},[s("div",[s("span",[e._v("Total Percentages: "),s("b",{class:{"text-success":100===e.totalPercentages,"text-danger":100!==e.totalPercentages}},[e._v(e._s(e.totalPercentages)+"%")]),s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Total percentages must be <b>100%</b>",expression:"'Total percentages must be <b>100%</b>'"}],staticClass:"info has-tooltip"},[s("i",{staticClass:"material-icons"},[e._v("info")])])])])]):e._e(),"fixed"===e.distribution.type?s("div",{staticClass:"mb-2 text-right"},[s("div",[s("span",[e._v("Total Rates: "),s("b",{class:{"text-success":e.totalRates>0,"text-danger":0===e.totalRates}},[e._v(e._s(e.totalRates))]),s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Total rates must be > 0</b>",expression:"'Total rates must be > 0</b>'"}],staticClass:"info has-tooltip"},[s("i",{staticClass:"material-icons"},[e._v("info")])])])])]):e._e(),s("label",[e._v("Order's Distribution")]),s("div",{staticClass:"btn-group btn-group-block"},[s("button",{staticClass:"btn btn-light w-50",class:{active:"equal"===e.distribution.type},attrs:{type:"button"},on:{click:function(t){return e.setType("equal")}}},[e._v("Equals")]),s("button",{staticClass:"btn btn-light w-50",class:{active:"percentage"===e.distribution.type},attrs:{type:"button"},on:{click:function(t){return e.setType("percentage")}}},[e._v("Percentage")]),s("button",{staticClass:"btn btn-light w-50",class:{active:"fixed"===e.distribution.type},attrs:{type:"button"},on:{click:function(t){return e.setType("fixed")}}},[e._v("Fixed")])])]):e._e()])])])]):e._e(),e.isMembersFetched&&0===e.members.length?s("div",{staticClass:"modal-empty-data integration-warning m-0 text-center"},[s("p",{staticClass:"mb-3"},[e._v("To assign product to Team Member, you must add Member to your team")]),s("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"memberCreator"}}},[e._v("Add Team Member")])],1):e._e()])},o=[],n=(s("55dd"),s("7514"),s("7f7f"),s("20d6"),s("4971")),a=s.n(n),r=(s("24df"),s("9af2")),l=s("6b5f"),c=s("ac98"),u=s("4c79"),d={name:"productBelongsTo",components:{VueSlider:a.a},props:{show:{type:Boolean,default:!0},productId:{type:String,default:""},productIds:{type:Array,default:function(){return[]}},requestData:{type:Boolean,default:!0},members:{type:Array,default:function(){return[]}},belongsTo:{type:Array,default:function(){return[]}},distribution:{type:Object,default:function(){return r["Y"]}}},data:function(){return{roles:r["Jb"],selectedRole:r["Jb"][0],distributionPercentages:[],rates:[],isSaving:!1,isFetchingBelongsTo:!1,isFetchingMembers:!1,isMembersFetched:!1}},methods:{close:function(){this.$emit("update:show",!1)},fetchData:function(){this.productId&&""!==this.productId?this.fetchBelongsTo():this.$emit("update:distribution",r["Y"]),this.fetchMembers()},fetchBelongsTo:function(){var e=this;this.isFetchingBelongsTo=!0;var t=function(t){var s=t.data,i=s.belongs_to,o=s.order_distribution;o.team_members||(o.team_members=[]),e.$emit("update:belongsTo",i),e.$emit("update:distribution",o),e.isFetchingBelongsTo=!1},s=function(){e.isFetchingBelongsTo=!1};u["a"].getBelongsTo(this.productId,t,s)},fetchMembers:function(){var e=this;this.isFetchingMembers=!0;var t={limit:100,sort_by:"name",sort:"asc",page:1,keyword:""},s=function(t){var s=t.data;e.$emit("update:members",s),e.isFetchingMembers=!1,e.isMembersFetched=!0},i=function(){e.isFetchingMembers=!1};c["a"].getMembers(t,s,i)},addBelongsTo:function(e){var t=this.belongsToMembers.findIndex(function(t){return t._id===e._id}),s=-1===t;if(s){var i={_id:e._id,name:e.name,role:e.role};this.belongsTo.push(i);var o=Object(l["m"])(this.orderDistribution);this.$emit("update:distribution",o)}},removeBelongsTo:function(e){var t=this.belongsTo.findIndex(function(t){return t._id===e});-1!==t&&(this.distributionPercentages.splice(t,1),this.belongsTo.splice(t,1));var s=Object(l["m"])(this.orderDistribution);0===this.teamMembersCS.length&&(s.type="equal"),this.$emit("update:distribution",s)},onSave:function(){if(this.isValid)this.save();else{var e="CS distributions percentage total must be 100%";"fixed"===this.distribution.type&&(e="CS distributions rate total must be greater than 0"),this.$notify({group:"productDetails",title:"Orders Distribution",text:e,type:"error"})}},save:function(){var e=this;this.isSaving=!0;var t=this.belongsTo.map(function(e){return e._id}),s=JSON.stringify(t),i=JSON.stringify(this.orderDistribution),o={belongs_to:s,order_distribution:i},n=function(){e.isSaving=!1,e.$notify({group:"app",title:"Product's Assignation",text:"Successfully Updated",type:"success"})},a=function(){e.isSaving=!1};this.productId?u["a"].updateBelongsTo(this.productId,o,n,a):this.productIds&&(o.product_ids=JSON.stringify(this.productIds),u["a"].updateBelongsToBulk(o,n,a))},onSliderChange:function(){this.update()},onRateChange:function(){this.update()},update:function(){this.$emit("update:distribution",this.orderDistribution)},getQuota:function(e){var t=this.distribution.team_members?this.distribution.team_members:[],s=t.find(function(t){return t.user_id===e}),i=!!s&&s.quota;return i},setType:function(e){this.distribution.type=e,this.update()}},computed:{options:function(){var e=this,t=function(t){var s=t.role===e.selectedRole.value,i=e.belongsToMembers.findIndex(function(e){return e._id===t._id}),o=-1===i;return s&&o};return this.members.filter(t)},belongsToMembers:function(){var e=this.selectedRole.value,t=function(t){return t.role===e},s=this.belongsTo.filter(t);if("cs"===e){var i=this.distribution.team_members?this.distribution.team_members:[],o=function(e,t){var s=i.findIndex(function(t){return t.user_id===e._id}),o=i.findIndex(function(e){return e.user_id===t._id}),n=s>o?1:-1;return n},n=s.sort(o);s=n}return s},emptyMessage:function(){return"No ".concat(this.selectedRole.label," assigned to this product")},totalPercentages:function(){return this.distributionPercentages.reduce(function(e,t){return e+t},0)},totalRates:function(){return this.rates.reduce(function(e,t){return e+t},0)},isValid:function(){var e=0===this.belongsTo.length,t="percentage"===this.distribution.type&&100===this.totalPercentages,s="equal"===this.distribution.type,i="fixed"===this.distribution.type,o=i&&this.totalRates>0,n=s||t||o||e;return n},teamMembersCS:function(){var e=this.distribution.team_members?this.distribution.team_members:[],t=function(t,s){var i=e.findIndex(function(e){return e.user_id===t._id}),o=e.findIndex(function(e){return e.user_id===s._id}),n=i>o?1:-1;return n},s=this.belongsTo.filter(function(e){return"cs"===e.role}).sort(t);return s},orderDistribution:function(){var e=this,t=function(t,s){var i=e.distributionPercentages[s]||0,o=e.rates[s]||0,n={user_id:t._id,percentage:i,rate:o};return n},s=this.teamMembersCS.map(t),i=Object(l["m"])(this.distribution);return i.team_members=s,i}},watch:{$props:{handler:function(){var e=this.distribution.team_members||[],t=e.map(function(e){var t=e.percentage;return t}),s=e.map(function(e){var t=e.rate;return t||0});this.distributionPercentages=t,this.rates=s,this.isMembersFetched=!0},deep:!0,immediate:!0},show:function(e){e&&this.fetchData()}},created:function(){this.show&&this.requestData&&this.fetchData()}},b=d,m=s("2877"),g=Object(m["a"])(b,i,o,!1,null,null,null);t["a"]=g.exports}}]);
//# sourceMappingURL=product-creator~products.0474252e.js.map